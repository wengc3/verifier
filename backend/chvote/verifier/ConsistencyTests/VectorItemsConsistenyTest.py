import os, sys
sys.path.append(os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))))

from chvote.verifier.SingleTest import SingleTest
from chvote.Utils.VerifierHelper import completness_decorate

class VectorItemsConsistenyTest(SingleTest):
    """
    docstring for VectorItemsConsistenyTest.
    """
    def __init__(self,id,title,description,key, vector_keys):
        SingleTest.__init__(self, id,title,description,key)
        self.vector_keys = vector_keys

    @completness_decorate
    def runTest(self,election_data):
        """
        Check if there is s values with the same voterId.
        >>> res = vict.runTest({'voterId': 0, 'beta_j': [['964544642030089042698445902050542342558108560327685534297148545195327898253053509792686279022405200614301208861175248856707000656446014850882732903130228349395831596930416338388880808014354809290512613474137099881408489775990964749120185317623421950674803684185479091743043277268697747077229770402249849355278123326033785732736433644591136051587009073346347495162835599792099287714021975282524635702991425602626239659133222816428538782096944329425735358153927032764038348447744239115993292448991413112422436071552678624471268637493040862722196199351499157968593496882662883335596430999656362000030397463013924434260456104514119577084575378001328520629867501122007197488024888387534623634553279593211725265044257473058058292830631316551286083583756048014888017411899075792728704581322473076805014550594667318384274670879228013008194128893972661335822284158407075631758633461727791392099294321516031179484185436378152502223772'], [['acaaa3e0834cf4ee044d0bd04164bef824a4e4708d357c6a0b3d8b93091b1acf273b10b95ce5d9976602695305d70496e6911d537b32ef979eefbf969a3dc8e3'], ['9ec3105183fafe6bf354feafd256351458f67fc34462b4d9a118218d5698e243b587890bf69b30a916c5b82dbf91827b00da001f9e3c36b39a7f22ffa66bbbce'], ['b463230c73ebbbae039dc6a21925af845ea1e8a96368633b02f5d6ab82ac95bf3fbfad569c243a4d820130291ddf510e7f3cbe39b127cbf9f501e704fc5a5b5b']], '182242508400083455368714174223720732507430606064574725434551012186722694637713000841983066981444915388433616661393712747020066467517327489904272661493632874641753825079181211007516843862630286811255262966599852199058747514064286077075238067623921954916952214238285776308335436032138747465680027252151759341116377526285429054242907903129177188556029093321495967468588849707501911652442780416138119633924261354114936999943056634941343988132634619339835820079334367449692502471884471299590357149968675714034286462473056317293526735522751851455101565936418119195312404770662463188415663069785711238323164792695878382640593030092491903369745852928804131736178000017628691118529917051370932383733795241242335723247241583148553500226275583921984984442698926498877252157444436680287031698071577275776186316676011730144130241323161469729375579999203259645597355543904790104428270465011855907279145169371268524621186272579382508015249']})
        >>> res.test_result
        'successful'
        """
        try:
            id = self.test_data
            vector = list()
            s = self.election_data['s']
            vector_key, item_key = self.vector_keys
            for item in self.election_data[vector_key]:
                if item['voterId'] == id:
                    vector.append(item[item_key])
            return 'successful' if len(vector) == s else 'failed'
        except KeyError:
            return 'skipped'


if __name__ == '__main__':
    import doctest
    from chvote.verifier.TestResult import TestResult
    from app.verifier.Report import Report
    TestResult.setReport(Report("1"))
    vic_test = VectorItemsConsistenyTest("1.1","TEST","TEST",["voterId"],['responses','beta_j'])
    vic_test.election_data = {'responses': [{'voterId': 0, 'beta_j': [['964544642030089042698445902050542342558108560327685534297148545195327898253053509792686279022405200614301208861175248856707000656446014850882732903130228349395831596930416338388880808014354809290512613474137099881408489775990964749120185317623421950674803684185479091743043277268697747077229770402249849355278123326033785732736433644591136051587009073346347495162835599792099287714021975282524635702991425602626239659133222816428538782096944329425735358153927032764038348447744239115993292448991413112422436071552678624471268637493040862722196199351499157968593496882662883335596430999656362000030397463013924434260456104514119577084575378001328520629867501122007197488024888387534623634553279593211725265044257473058058292830631316551286083583756048014888017411899075792728704581322473076805014550594667318384274670879228013008194128893972661335822284158407075631758633461727791392099294321516031179484185436378152502223772'], [['acaaa3e0834cf4ee044d0bd04164bef824a4e4708d357c6a0b3d8b93091b1acf273b10b95ce5d9976602695305d70496e6911d537b32ef979eefbf969a3dc8e3'], ['9ec3105183fafe6bf354feafd256351458f67fc34462b4d9a118218d5698e243b587890bf69b30a916c5b82dbf91827b00da001f9e3c36b39a7f22ffa66bbbce'], ['b463230c73ebbbae039dc6a21925af845ea1e8a96368633b02f5d6ab82ac95bf3fbfad569c243a4d820130291ddf510e7f3cbe39b127cbf9f501e704fc5a5b5b']], '182242508400083455368714174223720732507430606064574725434551012186722694637713000841983066981444915388433616661393712747020066467517327489904272661493632874641753825079181211007516843862630286811255262966599852199058747514064286077075238067623921954916952214238285776308335436032138747465680027252151759341116377526285429054242907903129177188556029093321495967468588849707501911652442780416138119633924261354114936999943056634941343988132634619339835820079334367449692502471884471299590357149968675714034286462473056317293526735522751851455101565936418119195312404770662463188415663069785711238323164792695878382640593030092491903369745852928804131736178000017628691118529917051370932383733795241242335723247241583148553500226275583921984984442698926498877252157444436680287031698071577275776186316676011730144130241323161469729375579999203259645597355543904790104428270465011855907279145169371268524621186272579382508015249']}, {'voterId': 0, 'beta_j': [['2420990233158531550757944803867444971380182928432155763277445959938193395755704616927715753990975944246773787824523317911517726860392835896850990293640907442404717695265621159922264376604876977003168760709396959347943678806302822181004460905730499369408803939165092913489099309198550092572362203153660615222206224241451181109823018636119696063149243927767810323267944758985438233354711583071773549428010190805622961821301105455513583322368315692737851415463057666651952976571315200362446200266536084672285929323486080796648684803183960763610252023054813796329688417899330800474593529209707657469324177618312256765542391572634333761346729877286085840993286350523262363095145134190777084893177023424850658650249473977648080762116125845465513188824691401938564105852445178583339856922861752888783125334984254773258318373069112434922652183700631127587995824539672205825497522501089057031050742565083782319961287866278315685204781'], [['993454ead0f647c83b7e49d0804aa2193b4397fe776619c0069f6c86db4fe116504698bd6f625d490eca5952fdcf1492e9cfc69b71953492d124b58d50dc699a'], ['b2485e3459dfbab6b92afdc78e5febf4cfa334dcba43555f152f02c494c4e37933135162feae26ee3afdb5ce95c16d9c90c27a4ee751423081cf2b65b91b0f24'], ['092f14135abfdcdfecf709c6108429958676d2da4b3583f98fec32467cd1831a42172d2c332b555650516f14632c17c9749108652cea2556d0e6a24a46780b25']], '1984084379358205912139698526827896088798708927874253460879249962946847065082378820327725372889985370109467627701443948969871594864241673464756878505157638075108930312848882832505745696043858567489101076771622560491788285578144732265778575003900803261081865926221630455799425446324810304833337788068848887954167551184807209218447524431409314065608586340938678861397828102051090977874551950223599086698671379914991710275810806858775121106607159592380309178392812027419901593200542486235801153018342899921316794154386830007800490937471490795448901381782885139002428956813242100169124712264184063068786654230906306106962321929611375418604307094588572816874409621123551703049813918088163146785000564922874470886218231108297023982085185306666866627541941092416494316611060767254098108814611203367607735899953105620412129782061314819370867519494703605352708684567799204301117593354727311898944810414775347495276239744570423485818795']}, {'voterId': 0, 'beta_j': [['838198885513448048766325417893574543441037367683212587481352885236220879772645055301708709338742267647418710574914768929391530260721780161882481365727599795709552128469756146936846979094309717388805814082417221406251613080130643144253114176393175932154718999907141404456181898688891140607447612417288910433164217613270859461878357098092893915746873744661220253152123508535099278034220614048880510979180926925281814374915682962539001433686829612100946753338197176796455653374401079210294933266604194344376318840747298863951378471814387130855334293798493418214263648417394112810697798519085184414260622796614568695135704451250073035952438154170325636736237034682807711155756695264815212562633924520430938000259219760859494131189072291411119249164268418742796936518989868052095353567805502885745687717704727892949856720009824425002256615652370739756159191805160246082322239268195759465364317369113946513206738952227262871121501'], [['0939a936fc7358943c3002796edb8b9985534e5b697357850d2374f60ad4699c1984ad58bb1b9de131f2dd156e8a89fada418b0c3557f40fd2f783dec724692f'], ['677a690dc69cf2e64f707ef27e6220217cede5340cfd56c82a4931e2eeec8f456c0948bc0e3159bef2e5436d66a75c6c11ddfef57946c665382b323ea4a82abc'], ['ad89c5541d3d5cd06d22816b7036ba21f2c8525858e7cb21c3e79a655daad88145772effd2d38270f174adcbd10b1e5ebec7c809ec5d272636d241a234b9309f']], '1820985724153701843157678230038548644426896974073782992894458610171681070024674888291317727555647460190564422137433389902772034551713834471584936469596638072301894596314608980046718454564254556347074496531601461320144572336563888889870373000592041993518451766545513193596240902038766483448838113005499748377910636909494989346831355686523670539809497158538296557868708380961038765200704939317656084239652237996746516689246025958721449532420839761887102508973983497393379762392094727588103548476764843741192683681776486718061855643308940557330455088862917070447359383358395160155276169734607209517368228286054649443368445944381633053341183244234959231193606396125150523810497596470063618614504710264657264916709045280785698400842831201036209339042095963314903768907051484342225763046397374157099315767109978901291057371900235041505889990689136408285649551474887405690001095125605029559834417964715183524383557322860565666223189']}, {'voterId': 1, 'beta_j': [['1648557996970403569745064848583249198540741277775406623101766646054506251246345327864371997062782128192229642728731367635942705520907870602676887514816362507424076595085236162590749833265873293709399179115744041509019188645308163483440200132657248853508163498705496040040356111570860676212275401833869499126636089685458216496836427789073195519288002345945107913261107895302009443275579217210417706932356687541895165953715182022763093457240540305016280658420917726376493087129055771725814612195176917476566284962850981244251299578804337293606467544174808032713228557639697027079410505838785643931727309433303232082487544751567338165838105491932256663793316067373113301264107143776652372889811012425986054567998626335649472214634825705433253754649049778249737513748141114823859620690444086763079597983822507170129201350309668150024502597154841163668203409096599006591684715565106437542115226394238301691779363961675823443584405'], [['e4a2117ab17de58198d80c90759e8b5c85c9b1f282788b18242f311256e64743e14ee88e870826e68cfb5a042cd617cdf95b6a0fdc95c6cb43e953a86f0a58a2'], ['2cf2d2b2e5619334c4d9cb07b68b0c417141e94e1e559b0a88cd2a2507fcbb3d73a4dd81c3061379d524f6e946f4cb8663c27291f5658a879aae08e56855ec01'], ['3b203050694184f912c542ed802bddb61e2f9bb2501f877c8fbe2927539698088f6a2d9526463776f8f2afb342e0bc2bf700f47b57db215de11a4c4cdd3d80ee']], '1130642851693236809253217416911296865541158067079742367035175947705784008534795077456945411482747716332165711039302046014598084702488235209128684077808180784343918626645847115595849357405656796118864679575510440637152577277267771402197763169796264632036669287658026544082772130417288606497064590097050271491366189555532748070559097370920055373385315619951426300452307929177618727381480767869492169496287654478936720574556188756251555685444825305341891491632439794264871176661542560977842358847695075636655860669257635736877335706140243831902535985404262174579975548952783835996217820024117191801147916927581747543116780322927247717305344446811817618830263764266552558666494016755590613231991232120438098411884377869027968210143097785298165462944435006336617201818485017301153584811412880929555014887880787866674864445088264787802340169265704363511450228167938219637747156484222305354074884333434622610777325625695589360937027']}, {'voterId': 1, 'beta_j': [['1501463021860280667278204627671621656782757307918755944629764350306617928517323864104748229212794217467326913170328746645512459756595633308565548924499645445971319863484089478159911782315060740694612974814330462233929532098713224554989307831855051720337630813251990322184351272218480631067982890789483647801679142376900252780429284438677151828474748730889954276180674540279186896762505005656089044010991910205142110427263071776243075724112197257215979818362823944411945730919364911895357319122360849233518688547285353705978318847744428256782584967733018101675747021180097281111715240593232585244470036036632212087308962156199688292489693749997621147527942386624395666917296881604887841180162066132347427565892440961288141420742724183268228930984355692820911824593890941597647357819087515019733812854236385071687676953825832341491685145931972234814337525597431612908695209502934172207661274175077418447632310237466304774028745'], [['e9c7d4c78337619bc3887620866cb3083ab8d8bc44dca6fe0daafaf07efe4652eefc7a0314bacb8cebf5deb0fb5b36580ed6bcc18878529f4b0be4f75a8da7c4'], ['1709f17f972f0ecb8e3220e359b7b814334a23e7c5b918ac8ad6e0a2d3cbd59ca5cda7069e0c643ddaa5fd0eb95f54b4449790f0824f22289aeff175e312e994'], ['b4f56ee274796cd6492b9bc639bf66df46f7746b5ae3bddca974218168e25883f427b4bf3627db780f499c60b0317ea7184f13cd5815d851b8b13022ba2b5752']], '3213562523159407177087667292760977884428739625601958450769218843004036351817203715349583337003407368797925774172180518480787376247195100236228980429183200225318503926983541530776199810895782315710439810233674006908006867789283650121574142641585849947785064582617074478196681433459724091106104900911530507535583841167075658253594519690583830366472233293695210303778086921462133489174496848319027373534999113307438853900126341079934467659478142905937046574311274241602278776242863151288178473849279644864072545989575460605011809255732178957890599915461350562081157684340284046573997066083523624789523656681771274965160971803163147012569079438756019315407550738542018519976274627583823468136834726335356230704411454823121577159537521874915356999949817948417849604311648053792993019588514498875355703492597737422347863291071992569497371551607498443993130139101415145729240097539984932240466740197595493285899065665986690547471352']}, {'voterId': 1, 'beta_j': [['659976843975680753196885112387951738970307350636157710955474333176015910673530253549550092779341664130012044373271735536893458006666638535524855828479984773035506674137044620651394875489738808729217687381320279548507374662017308755179590696740521424349630600891572494698027476193230788545233588536430825150753323259762186767727774058354416956501020377303656943584134381023405551773716606087412412881354181621511444363059123274082294250498485986188331466091854031239883907706888216033528334419979674443681802701493957225810598482755134763508856434053961593361093680613032595664515348467571656185136559607256128909584495348321846050877837704311461724547541099766928580704052295475777550545673972694965854259660557994640927217415543983094524627248083395922595599691550524161973682994332998490013679579774606921580932288676146864936379725034141844678364873399627493449270144520457263264706463389634924698145865077718487056594112'], [['dfb4cdd97c8a5ebf9acc8b24fd06e089e1a372a9f549de6af1ecbaef13b56da0aff1dc947e46eb041b50d6ddbbf8352f62e9cdbdf77aeaebdf7d28983a0f77a9'], ['780c4b9bfbfc3fd3cf0b6babb9239a5a164dd16ad7d6b60ac9feefad9f8751a066253b49a7a670dc458c905d9c54b67c3c269e8bec5c2b499a818b873f51147f'], ['874da69a0fcfc7c90245e181e1085570331d908d029fa26816ed5f535ee93257697dfdf468a62e611350d456717449c2ca5530e88a4c5159775d829064c26a45']], '985760368881876740208082750722685475656000611477521439036494921178731445527093361931827386598140312617855504900452555565543060883315997378968683888707837740671026408220468961379610465683908108395456319068774391008535588823096782410372409006905779273716916187254062965841672161875385172341339802011529523350613075922833998928029782496345000491987390681286705426477378436464499930327608061954444613032785592735390455483601872424095911813109363460153842384164053374902765384009466282528426278847767797042388688361985477301039018553057137548051574211970017708958630172284646721723256891290391502323284993626687328874989422230852081896242718262783648298121341638043221672253188229286436712576895924544224911536423524759840145230157995961644403818819182597670300871681066862370729282720548949466057660434227708238094198023216928115044312434095270462796990422079395687253990936263801172468788927140298854922501451329850368693803624']}, {'voterId': 2, 'beta_j': [['1513149379488297187528385303812165149952984473669730567097978389339187644059963894159956717674206039203632582317658390703004805395161292891758073027652302495546820294125145967731360234286139727606836304258614363261124953428247970163844352396757892212573600700503770021333560070544299006924239171089422610905984103021007158234965946903763087010906630666539162187399197232546082881702784405556923792886941090041636100483813357507915520033725773303016257224882246453827575729874268537100472919017911093773811127746726661996634285269894714183958874657852766839513551122229941587070689858547545140119216899747946899613212977875773327541413245997707104761715602482805446447420469168834043545766201465314874896378447876089777468361100664928427949769458644285998912795686777688706868412132911006123335126228238658382526631468409693751385912483484816209996639099039269157413254321531781763255247709584958400976623870250932085804789808'], [['7fd2f916844db948e95f3a011e28885ec251e9a1dd88d11470659566c8df1c7e3c15e0cc57f5378f4444df1e90b06db6ea5c3286032f3890378b030dda76eade'], ['9265458b91b2678d41e42af35216719e5f3d9b5941653d6eeb7c50b1cd32bbd19f64a8bed6eb1e954cdfdd5a9d98001621ceb57b55ac03c3a3e2b5f040714a10'], ['a5e36d673f8ebdfd88a47faccfe73086604bc6b2e2eba739a87c112acca97b632e12b023551a7a8b3732c21205fcca5c3b49611d4bdb28ec9823836d27d43d2a']], '4140274431344356112512119986747544997084506243934461838549964919563512725494297040856997106642066204963629706345559148194089529644814030229846416088719820042304946411498600270535500035590663482826820020691554718320672700828536960935774609564162073861685605191017379981759616114313043147828665331716290904558520778649291019637736770308880561786777455000448753810419928006002324782572931170994765991324793739972828868398101881407970267789064584569423403672650408632064992672619724047421103892541318244265616284064680525391414051153341582790844291231998597177498777065516175146080462880905383636428939090039516065500550862275440930384246678170927461989752151755073340945410642047323452172634756627004462115002014100314379141881507882353975399902477074130565764726212261555087987225049377263866771633745427626112757765150330836418417636816837193797349963213936249461761628753983660487065677410433904697698425695511709243383324189']}, {'voterId': 2, 'beta_j': [['1399562538477257482371764910073880789914346177721017695481984121806335315817597968384732320498924370564564834669397331801003845015189833798493196489049827922196487047815499978006965348287289195668479334401896063058552551859874315306347246826018765184232946907284437981721156175029703019842577289296408413122289651434284518320915312131717227164675426791754624701250938811031756785177278338355337140935504710087440305658465442528645502789188527666486478720499835874267260156964841230135273476809993898268514193614387323129815979870661221698557723361911526034122363255054701129749138673670865062083351343596018039071264682682384626013486276122782128069842884549781710166845479971907996558692312844713714889724851472004544046896663769510015240835475390091527478282984062252835530602687541545419507942819263973732566711954801664332665380869048487787449655481250829777594388836934665595157733160123779961866021856199287888915456627'], [['6cf30c8be1c654bb03ced91cd5730ae435f557d98d0153ebb4c3142793a6a3cd5c78c33bf4302fd6ef3de56ed148cf838d5f9875f824a059ab130796f09e807e'], ['7701b501e3b8ebff1abd66b1fce7c0b95fb8ed59dcab8a170194d3b5acd5cc4aa4738dcb75ec18d907842124ddea2412eb14844fc43cbcb5e22a91f1d5d49258'], ['01a79db820a104513762205d7aeeba821a553c118a4fc424363c797ecfdd8de59896e868b3f27b8904298a722b33d9042c481acc8e189ed3cb1e1d9652f5baca']], '1744695546575977020051665248386668819588794625054444214027125726988599885162017622451056372478756984494604391365430138185801133101996902040610374114052120350815023784443024744301536713087144160187805455380256383802512407448116620471479969291343112708371935715558745016032144293689713565378305762726275920542125336207916714877242988691867236535340805977118722628723984098162556759639763416791995429806509327726199370007252148468210219065934005130809205650036134939641609514755212826622928053885438924991878552800008878611349361812717371787600399454463738514633844966178550609088641966788041884784571662319030177329540330902155254891619353017643919542630119950756977154128826640665448949729523495159997653977085990650236283119663683972169227823832633352206848602646721934667289290594172182173550463610844737495069968608391185031946292857303642598529108300324237278233086173706915144192311315183120746129587281910859873144548659']}, {'voterId': 2, 'beta_j': [['691787813303947023795627442121119153362697689513478187128905140914010497459015478294952671599832312482544815059448384810091209586350876009437714096746800565714649185256279527114731270437081054256623494439116221168149404309264201055103487181518222698115098176250427768950032952194175922227270121336712908083899654801944258786436918754113175444045699824411203319272332731014712989999375438693167905133811516765757401786407974512754551410850483922396535178447785801064943421436249569057016586874341495546251151468319126065213555827869610841284737038338203981405079172709826115133332426183768940032470727259487986736918314168502016727725695008204341485006065128099974139189444789424891518635619858797230909014744868602200478559807094697035455877742451313517964578778079449132028302225102625814820829986846999969753467070088090214765766389664549931717263557485612177253615954166558852703157873643098177954194032161651285404418790'], [['8b01b08f30cf31d793edcdd4f0d8eef81b3506a1e5915d4f77dc73e4e01bc9add7024e35f79d542dfed3f20cb8b56128c11c660d04799e0f87670fa00a51bf37'], ['410b22e4fade38a1dafb8bb2742db3562de56e7fd17daff79a08e3b818619ee8ab63bb0e22e7a9d4945b168b323b7c826d1730a268a9dd3dc7b1a1a858de5518'], ['cd3488193b14a53b4c1d936ec0a28e47abe55bbe63f14b8c995cdc065322dab93a929364ca0920854f5487e103c17860335c88b462e959a3db24fb130a1fe971']], '1133249147236355463917572724950785570094611953953274330328538906541325404747675570385212648778905962523393510981615964413092177708947427307515362288403662280973748643608257328415406035823171498873953359727523561818636326632762739305073746222997425000699574697182321835428500515747129797839688140361978850522580897043902905692134163801275533139746583905956650110624572526149243166220589724021140695306525318446758319004528268143582241542223376238971240094094933680807411643784270317146361605549023157026865196556799569677237271586919244562230824005264468171159983176329311097266815894979852639242923553694197529310776753610842096173895907089617966740113764418275861384317506422806914998409680026911464948484680426213503435777661200656376159521997847531631375005523487931708054638398596671894647731004621533655863121847836309852415980442728304054042425990209359445868063445883813367428859740424919225108605174386508742542305760']}], 's': 3}
    doctest.testmod(extraglobs={'vict': vic_test})
